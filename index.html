<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GBQKGSS01G"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GBQKGSS01G');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        body { 
            font-family: 'Inter', sans-serif; 
        }
        .animate-fade-in { 
            animation: fadeIn 0.5s ease-in-out; 
        }
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(-10px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // --- Icon Components ---
        const CheckIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
            </svg>
        );

        const XIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
            </svg>
        );

        const InfoIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        );

        // --- Main App Component ---
        function App() {
            const [totalClasses, setTotalClasses] = useState('');
            const [attendedClasses, setAttendedClasses] = useState('');
            const [requiredPercentage, setRequiredPercentage] = useState('75');
            const [result, setResult] = useState(null);
            const [error, setError] = useState('');

            const calculateAttendance = () => {
                setResult(null);
                setError('');

                const numTotal = parseInt(totalClasses);
                const numAttended = parseInt(attendedClasses);
                const numRequired = parseFloat(requiredPercentage);

                if (isNaN(numTotal) || isNaN(numAttended) || isNaN(numRequired)) {
                    setError('Please enter valid numbers in all fields.');
                    return;
                }
                if (numTotal < 0 || numAttended < 0 || numRequired < 0) {
                    setError('Values cannot be negative.');
                    return;
                }
                if (numAttended > numTotal) {
                    setError('Attended classes cannot be more than total classes.');
                    return;
                }
                if (numRequired > 100) {
                    setError('Required percentage cannot be more than 100.');
                    return;
                }

                const currentPercentage = numTotal > 0 ? (numAttended / numTotal) * 100 : 0;
                let classesToAttend = 0;
                if (currentPercentage < numRequired) {
                    classesToAttend = Math.ceil(((numRequired / 100) * numTotal - numAttended) / (1 - (numRequired / 100)));
                }
                
                let classesToMiss = 0;
                if (currentPercentage >= numRequired) {
                    classesToMiss = Math.floor(((numAttended / (numRequired / 100)) - numTotal));
                }
                
                setResult({
                    currentPercentage: currentPercentage.toFixed(2),
                    isSafe: currentPercentage >= numRequired,
                    classesToAttend: classesToAttend,
                    classesToMiss: classesToMiss,
                });
            };
            
            const handleReset = () => {
                setTotalClasses('');
                setAttendedClasses('');
                setRequiredPercentage('75');
                setResult(null);
                setError('');
            };

            const ResultCard = useMemo(() => {
                if (!result) return null;

                return (
                    <div className="mt-8 w-full bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg animate-fade-in">
                        <h2 className="text-2xl font-bold text-center text-gray-800 dark:text-white mb-6">Your Attendance Report</h2>
                        <div className={`flex items-center justify-center p-4 rounded-lg mb-6 ${result.isSafe ? 'bg-green-100 dark:bg-green-900' : 'bg-red-100 dark:bg-red-900'}`}>
                            {result.isSafe ? <CheckIcon /> : <XIcon />}
                            <p className={`ml-3 font-semibold ${result.isSafe ? 'text-green-800 dark:text-green-200' : 'text-red-800 dark:text-red-200'}`}>
                                Your current attendance is {result.currentPercentage}%. You are {result.isSafe ? 'safe' : 'in the danger zone'}.
                            </p>
                        </div>
                        <div className="grid md:grid-cols-2 gap-4 text-center">
                            <div className="bg-blue-100 dark:bg-blue-900 p-4 rounded-lg">
                                <InfoIcon className="mx-auto mb-2"/>
                                <p className="text-lg font-semibold text-blue-800 dark:text-blue-200">Classes to Attend</p>
                                {result.isSafe ? (
                                     <p className="text-sm text-gray-600 dark:text-gray-400">You've met the requirement!</p>
                                ) : (
                                     <p className="text-2xl font-bold text-blue-900 dark:text-blue-100">{result.classesToAttend}</p>
                                )}
                                <p className="text-xs text-gray-500 dark:text-gray-400 mt-1">to reach {requiredPercentage}% attendance.</p>
                            </div>
                            <div className="bg-yellow-100 dark:bg-yellow-900 p-4 rounded-lg">
                                 <InfoIcon className="mx-auto mb-2 text-yellow-500"/>
                                <p className="text-lg font-semibold text-yellow-800 dark:text-yellow-200">Classes to Bunk</p>
                                 {!result.isSafe ? (
                                     <p className="text-sm text-gray-600 dark:text-gray-400">You can't miss any classes.</p>
                                ) : (
                                     <p className="text-2xl font-bold text-yellow-900 dark:text-yellow-100">{result.classesToMiss}</p>
                                )}
                                <p className="text-xs text-gray-500 dark:text-gray-400 mt-1">and still maintain {requiredPercentage}%.</p>
                            </div>
                        </div>
                    </div>
                );
            }, [result, requiredPercentage]);

            return (
                <div className="min-h-screen flex items-center justify-center p-4">
                    <main className="w-full max-w-md mx-auto">
                        <div className="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-2xl">
                            <div className="text-center mb-8">
                                <h1 className="text-3xl font-extrabold text-gray-900 dark:text-white">Attendance Calculator</h1>
                                <p className="text-gray-500 dark:text-gray-400 mt-2">Stay on top of your attendance goals.</p>
                            </div>
                            <form onSubmit={(e) => { e.preventDefault(); calculateAttendance(); }}>
                                <div className="space-y-6">
                                    <div>
                                        <label htmlFor="total-classes" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Total Classes Held</label>
                                        <input type="number" id="total-classes" value={totalClasses} onChange={(e) => setTotalClasses(e.target.value)} placeholder="e.g., 50" className="w-full px-4 py-3 bg-gray-100 dark:bg-gray-700 border-transparent rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition" required />
                                    </div>
                                    <div>
                                        <label htmlFor="attended-classes" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Classes You Attended</label>
                                        <input type="number" id="attended-classes" value={attendedClasses} onChange={(e) => setAttendedClasses(e.target.value)} placeholder="e.g., 40" className="w-full px-4 py-3 bg-gray-100 dark:bg-gray-700 border-transparent rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition" required />
                                    </div>
                                    <div>
                                        <label htmlFor="required-percentage" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Required Percentage (%)</label>
                                        <input type="number" id="required-percentage" value={requiredPercentage} onChange={(e) => setRequiredPercentage(e.target.value)} placeholder="e.g., 75" className="w-full px-4 py-3 bg-gray-100 dark:bg-gray-700 border-transparent rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition" required />
                                    </div>
                                </div>
                                {error && <p className="mt-4 text-center text-red-500 text-sm">{error}</p>}
                                <div className="mt-8 grid grid-cols-2 gap-4">
                                    <button type="button" onClick={handleReset} className="w-full py-3 px-4 text-center font-semibold bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors">
                                        Reset
                                    </button>
                                    <button type="submit" className="w-full py-3 px-4 text-center font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800 transition-colors">
                                        Calculate
                                    </button>
                                </div>
                            </form>
                        </div>
                        {ResultCard}
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
